<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Introduction à SonarQube et Eco Code">
    <meta name="keywords" content="SonarQube, Eco Code, TP, écoconception, développement durable">
    <meta name="author" content="Rochat Lise">
    <meta http-equiv="cache-control" content="max-age=31536000, must-revalidate">
    <meta http-equiv="expires" content="Thu, 31 Dec 2024 23:59:59 GMT">
    <title>TP 01 - Introduction à SonarQube et Eco Code</title>
    <link rel="icon" href="../../assets/img/favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Major+Mono+Display&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../assets/styles/styles.css">
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
</head>

<body>
    <header>
        <nav>
            <ul>
                <li class="mg-0"><a href="../../index.html">Home</a></li>
                <li class="mg-0"><a href="../ressources.html">Ressources</a></li>
                <li class="mg-0"><a href="../outils.html">Outils</a></li>
                <li class="mg-0"><a href="../terminologie.html">Terminologie</a></li>

            </ul>
        </nav>
    </header>
    <div class="main">
        <h1>TP 01 : Introduction à SonarQube pour l'éco-conception</h1>
        <section>
            <section class="collapsible">
                <h2>Objectif <span class="toggle-icon">+</span></h2>
                <div class="content">
                    <p>Installer et configurer SonarQube avec les plugins de "Credengo" pour analyser un projet de base, et
                        interpréter les résultats pour identifier les points d'amélioration en termes de performance et
                        d'éco-conception.</p>
                    <p><strong>Temps imparti</strong> : 1 heure</p>
                    <p><strong>Date et lieu de dépôt</strong> : À déterminer</p>
                </div>
            </section>
            <section class="collapsible">
                <h2>Informations <span class="toggle-icon">+</span></h2>
                <div class="content">
                    <div class="info-block">
                        <h3><i class="fas fa-cogs"></i> SonarQube</h3>
                        <p>SonarQube est une plateforme open-source utilisée pour l'inspection continue de la qualité du
                            code. Elle permet de détecter des bugs, des vulnérabilités et des mauvaises pratiques de
                            code en analysant automatiquement les projets.</p>
                    </div>
                    <div class="info-block">
                        <h3><i class="fas fa-leaf"></i> Creendengo</h3>
                        <p>Creendengo est un ensemble de règles pour SonarQube visant à réduire l'empreinte écologique du 
                            développement logiciel. Il fournit des recommandations spécifiques pour optimiser 
                            l'utilisation des ressources et minimiser la consommation d'énergie.</p>
                    </div>
                </div>
            </section>
            <section class="collapsible">
                <h2>Prérequis nécessaires <span class="toggle-icon">+</span></h2>
                <div class="content">
                    <ul>
                        <li>Connaissances de base en HTML, CSS, et JavaScript</li>
                        <li>Docker et Docker Compose installés sur votre machine</li>
                        <li>Accès à une machine avec Ubuntu, Windows, ou macOS</li>
                    </ul>
                </div>
            </section>
            <section class="collapsible">
                <h2>Livrable <span class="toggle-icon">+</span></h2>
                <div class="content">
                    <p>À la fin de ce TP, vous devrez compléter une section de votre rapport individuel décrivant les
                        optimisations effectuées, les résultats avant et après optimisation, et une évaluation de
                        l'impact des optimisations sur les performances et l'empreinte écologique du site.</p>
                    <p>Rappel critère du rapport</p>
                    <ul>
                        <li>Longueur : 10 pages maximum</li>
                        <li>Organisation du rapport :
                            <ul>
                                <li><strong>Introduction</strong> : Présentation générale du projet et de ses objectifs.
                                </li>
                                <li><strong>Section 1</strong> : Installation et Configuration de SonarQube et Eco Code
                                </li>
                                <li><strong>Section 2</strong> : Optimisation des Ressources Web</li>
                                <li><strong>Section 3</strong> : Détection et Réduction des Scripts Inutilisés</li>
                                <li><strong>Section 4</strong> : Optimisation de l'Utilisation des Polices Web</li>
                                <li><strong>Conclusion</strong> : Résumez les apprentissages et les recommandations
                                    principales</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </section>
            <section class="collapsible">
                <h2>Mise en place de l'environnement de travail <span class="toggle-icon">+</span></h2>
                <div class="content">
                    <ol>
                        <li class="step">
                            <h3>Étape 1 : Installation de SonarQube avec Docker Compose</h3>
                            <p>Créer un dossier <code class="inline-code">tp-sonarqube</code> :</p>
                            <pre><code class="bash">mkdir tp-sonarqube</code></pre>

                            <p>Déplacez-vous dans votre dossier <code class="inline-code">tp-sonarqube</code> et créez
                                un fichier <code class="inline-code">docker-compose.yml</code> :</p>
                            <pre><code class="bash">cd tp-sonarqube <br>touch docker-compose.yml</code></pre>

                            <p>Éditez et enregistrez votre fichier <code class="inline-code">docker-compose.yml</code> :
                            </p>
                            <pre>
<code class="yaml">version: "3"
services:
    sonarqube:
    image: sonarqube:latest
    container_name: sonarqube
    ports:
        - "9000:9000"
    volumes:
        - sonarqube_conf:/opt/sonarqube/conf
        - sonarqube_data:/opt/sonarqube/data
        - sonarqube_logs:/opt/sonarqube/logs
        - sonarqube_extensions:/opt/sonarqube/extensions

volumes:
    sonarqube_conf:
    sonarqube_data:
    sonarqube_logs:
    sonarqube_extensions:
</code>
                            </pre>
                            <p>Lancez SonarQube avec Docker Compose :</p>
                            <pre><code class="bash">docker-compose up -d</code></pre>
                            <p>Accédez à SonarQube à l'adresse suivante : <a
                                    href="http://localhost:9000">http://localhost:9000</a></p>
                            <p>Connectez-vous avec les identifiants par défaut
                                (<strong>admin</strong>/<strong>admin</strong>) et modifiez le mot de passe lors de la
                                première connexion.</p>
                        </li>

                        <li class="step">
                            <h3>Étape 2 : Configuration du profil qualité sur SonarQube</h3>
                            <ol>
                                <li>Accédez à l'interface SonarQube à <a
                                        href="http://localhost:9000">http://localhost:9000</a>.</li>
                                <li>Allez dans Quality Profiles.</li>
                                <li>Cliquez sur "Create" pour créer un nouveau profil de qualité.</li>
                                <li>Choisissez "Create Blank Quality Profile".</li>
                                <li>Choisissez le language "JavaScript.</li>
                                <li>Utilisez le nom de profile "Eco_conception".</li>
                            </ol>
                        </li>

                        <li class="step">
                            <h3>Étape 3 : Installation des règles Creendengo pour JavaScript</h3>
                            <ol>
                                <li>Allez dans Administration > Marketplace.</li>
                                <li>Recherchez "creedengo" et installer le plugin pour JavaScript.</li>
                                <li>Retournez dans Quality Profiles puis choissez le profile "Eco_conception".</li>
                                <li>Cliquez sur "Activate More" pour ajouter de nouvelles règles.</li>
                                <li>Recherchez "creedengo" et installez les règles pour JavaScript.</li>
                                <li>Redemarrez le server comme recommandé.</li>
                            </ol>
                        </li>

                        <li class="step">
                            <h3>Étape 4 : Ajouter les règles au profil</h3>
                            <ol>
                                <li>Retournez dans Quality Profiles et sélectionnez "Eco_conception".</li>
                                <li>En bas de la page selectionnez "Activate More".</li>
                                <li>Recherchez "creedengo" et ajouter les avec l'option "Bulk Change".</li>
                                <li>Sauvegardez le profil.</li>
                            </ol>
                        </li>
                        <li class="step step-btm">
                            <h3>Étape 5 : Installation de SonarScanner</h3>
                            <p><strong>Ubuntu :</strong></p>
                            <pre>
                                <code class="bash">sudo apt-get install sonar-scanner</code>
                            </pre>
                            <p><strong>macOS :</strong> Installez avec Homebrew :</p>
                            <pre><code class="bash">brew install sonar-scanner</code></pre>
                            <p><strong>Windows :</strong></p>
                            <ol>
                                <li>Téléchargez <a
                                        href="https://docs.sonarsource.com/sonarqube/latest/analyzing-source-code/scanners/sonarscanner/">SonarScanner</a>
                                </li>
                                <li>Décompressez le fichier téléchargé.</li>
                                <li>Ajoutez le chemin de SonarScanner au PATH de votre système.</li>
                            </ol>
                        </li>
                    </ol>
                </div>
            </section>
            <section class="collapsible">
                <h2>Etude de cas : Site "anything-llm" <span class="toggle-icon">+</span>
                </h2>
                <div class="content">
                    <p>Pour cette étude de cas, vous allez analyser un projet réel portant le nom <a href="https://github.com/Mintplex-Labs/anything-llm">anything-llm</a>. <br>
                        C'est un projet github très populaire et open-source, nous allons alors utiliser ce projet comme exemple.
                    </p>
                    <ol>
                        <li class="step">
                            <h4>Étape 1: Clonage du dépôt GitHub</h4>
                            <p>Clonez le dépôt contenant le site vitrine :</p>
                            <pre><code class="bash">git clone https://github.com/Mintplex-Labs/anything-llm.git</code></pre>

                            <p>Déplacez-vous dans le répertoire du projet :</p>
                            <pre><code class="bash">cd anything-llm</code></pre>
                        </li>
                        <li class="step">
                            <h4>Étape 2: Configuration du projet dans SonarQube</h4>
                            <p>Créez un fichier <code class="inline-code">sonar-project.properties</code> dans le
                                répertoire racine du projet avec le contenu suivant :</p>
                            <pre>
<code class="yaml">sonar.projectKey=review
sonar.sources=.
sonar.exclusions=node_modules/**
sonar.host.url=http://localhost:9000
sonar.token=votre_token
</code>
                            </pre>
                            Vous pouvez générer un token Administration > Security et cliquer sur les trois points a droite de Administator. Vous pouvez maintenant générer un token.
                        </li>
                        <li class="step">
                            <h4>Étape 3: Analyse du projet avec SonarScanner</h4>
                            <p>Lancez l'analyse du projet avec SonarScanner :</p>
                            <pre><code class="bash">sonar-scanner</code></pre>
                        </li>
                        <li class="step step-btm">
                            <h4>Étape 4: Interprétation des résultats</h4>
                            <p>Une fois l'analyse terminée, consultez les résultats sur l'interface SonarQube.
                                Identifiez les points faibles en termes de performance et d'éco-conception.</p>
                            <p>Recherchez les recommandations faites par Creendengo pour améliorer l'efficacité du code et
                                réduire son empreinte écologique.</p>

                        </li>
                    </ol>
                </div>
            </section>
            <section class="collapsible">
                <h2>Conclusion: Rédaction du rapport <span class="toggle-icon">+</span></h2>
                <div class="content">
                    <p>Documentez les résultats de l'analyse et proposez des recommandations spécifiques pour améliorer
                        le site. Estimez l'impact de ces améliorations sur les performances du site et sur son empreinte
                        écologique.</p>
                </div>
            </section>
        </section>
        <div class="button-container ">
            <button class="button-secondary" onclick="window.open('../en-pratique.html')">Découvrir les autres
                sujets</button>
        </div>
    </div>
    <footer>
        <p class="mg-0">&copy; 2024 - ROCHAT Lise & COURDIER Remy - <a href="../a-propos.html">A propos</a> </p>
    </footer>
    <script>
        document.querySelectorAll('.collapsible h2').forEach(h2 => {
            h2.addEventListener('click', () => {
                const content = h2.nextElementSibling;
                const icon = h2.querySelector('.toggle-icon');
                content.style.display = content.style.display === 'none' ? 'block' : 'none';
                icon.textContent = icon.textContent === '+' ? '−' : '+';
            });
        });

        // Initialize all sections as collapsed
        document.querySelectorAll('.collapsible .content').forEach(content => {
            content.style.display = 'none';
        });
    </script>
</body>
</html>