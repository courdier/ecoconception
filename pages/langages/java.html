<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Règles d'éco-conception pour Java - Optimisations environnementales">
    <meta name="keywords" content="Java, écoconception, optimisation, performance, empreinte carbone, green coding, JVM">
    <meta name="author" content="Youssouf ONIAN">
    <title>Java - Éco-conception & Optimisations</title>
    <title>Java - Éco-conception & Optimisations</title>
    <link rel="icon" href="../../assets/img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Major+Mono+Display&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../assets/styles/styles.css">
    <link rel="stylesheet" href="../../assets/styles/print.css" media="print">
    <script defer src="../../assets/scripts/scripts-tp.js"></script>
    <style>
        /* Styles spécifiques pour les code blocks */
        .code-block {
            background-color: #2d2d2d;
            border-left: 4px solid var(--primary-color);
            padding: 15px 20px;
            border-radius: 5px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .code-block.bad {
            border-left-color: var(--emergency-color);
            background-color: rgba(253, 99, 99, 0.1);
        }

        .code-block.good {
            border-left-color: var(--success-color);
            background-color: rgba(105, 240, 109, 0.1);
        }

        .code-block pre {
            margin: 0;
            color: #e8e8e8;
        }

        .code-block code {
            color: #e8e8e8;
        }

        .keyword { color: #569cd6; }
        .string { color: #ce9178; }
        .function { color: #dcdcaa; }
        .variable { color: #9cdcfe; }
        .comment { color: #6a9955; font-style: italic; }
        .operator { color: #d4d4d4; }

        .eco-rule {
            margin: 40px 0;
            padding: 25px;
            background: linear-gradient(135deg, rgba(47, 223, 173, 0.05) 0%, rgba(47, 223, 173, 0.01) 100%);
            border-radius: 10px;
            border: 1px solid rgba(47, 223, 173, 0.3);
        }

        .eco-rule h3 {
            color: var(--primary-color);
            font-size: 1.6rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .eco-rule .rule-number {
            background-color: var(--primary-color);
            color: var(--background-color);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .impact-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: bold;
            margin: 5px;
        }

        .impact-high {
            background-color: var(--success-color);
            color: var(--background-color);
        }

        .impact-medium {
            background-color: var(--warning-color);
            color: var(--background-color);
        }

        .impact-low {
            background-color: var(--info-color);
            color: white;
        }

        .explanation-box {
            background-color: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 3px solid var(--info-color);
        }

        .gain-box {
            background-color: rgba(105, 240, 109, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 3px solid var(--success-color);
        }

        .nav-languages {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .nav-languages a {
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            text-decoration: none;
            color: var(--text-color);
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .nav-languages a:hover {
            background-color: rgba(47, 223, 173, 0.2);
            border-color: var(--primary-color);
        }

        .nav-languages a.active {
            background-color: #f89820;
            color: white;
            border-color: #f89820;
        }

        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            overflow: hidden;
        }

        .summary-table th,
        .summary-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .summary-table th {
            background-color: rgba(47, 223, 173, 0.2);
            color: var(--primary-color);
            font-weight: bold;
        }

        .summary-table tr:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        @media (max-width: 768px) {
            .eco-rule h3 {
                font-size: 1.3rem;
            }

            .code-block {
                font-size: 0.8rem;
            }
        }
    </style>
</head>

<body>
    <header>
        <nav>
            <ul>
                <li class="mg-0"><a href="../../index.html">Home</a></li>
                <li class="mg-0"><a href="../quelques-chiffres.html">Chiffres</a></li>
                <li class="mg-0"><a href="../quizV1.html">Quiz</a></li>
                <li class="mg-0"><a href="../en-pratique.html">Ateliers</a></li>
                <li class="mg-0"><a href="../ressources.html">Ressources</a></li>
                <li class="mg-0"><a href="../outils.html">Outils</a></li>
                <li class="mg-0"><a href="../terminologie.html">Terminologie</a></li>
                <li class="mg-0"><a href="../langages.html" class="active">Langages</a></li>
            </ul>
        </nav>
    </header>

    <div class="main">
        <h1><i class="fab fa-java"></i> Java - Éco-conception & Green Coding</h1>

        <!-- Navigation entre langages -->
        <div class="nav-languages">
            <a href="./php.html"><i class="fab fa-php"></i> PHP</a>
            <a href="./dart.html"><i class="fa-solid fa-bullseye"></i> Dart</a>
            <a href="./python.html"><i class="fab fa-python"></i> Python</a>
            <a href="#"><i class="fas fa-code"></i> C/C++</a>
            <a href="./java.html" class="active"><i class="fab fa-java"></i> Java</a>
            <a href="./rust.html"><i class="fas fa-gear"></i> Rust</a>
            <a href="./js.html"><i class="fab fa-js"></i> JavaScript</a>
        </div>

        <!-- Introduction -->
        <section class="intro-text">
            <p>
                Java se classe <strong>5ᵉ sur 27</strong> en termes d'efficacité énergétique, consommant
                environ <strong>1.98× plus d'énergie</strong> que C pour exécuter les mêmes programmes.
                Avec plus de <strong>35 millions de développeurs</strong> et une présence massive dans l'entreprise,
                le cloud et Android, les optimisations Java ont un <strong>impact environnemental considérable</strong>.
            </p>
            <br>
            <p>
                Cette page présente <strong>10 règles d'éco-conception</strong> concrètes pour réduire
                l'empreinte environnementale de vos applications Java, avec des exemples de code
                avant/après et des mesures de gains réels.
            </p>
        </section>

        <!-- Statistiques clés -->
        <section class="stats-icons">
            <div class="stat-item">
                <i class="fas fa-bolt"></i>
                <h2>5ᵉ / 27</h2>
                <p>Classement énergétique des langages <sup><a href="#source1">[1]</a></sup></p>
            </div>
            <div class="stat-item">
                <i class="fas fa-globe"></i>
                <h2>3ème</h2>
                <p>Language de programmation le plus populaire (janvier 2026) <sup><a href="#source2">[2]</a></sup></p>
            </div>
            <div class="stat-item">
                <i class="fas fa-fire"></i>
                <h2>1.98× vs C</h2>
                <p>Consommation énergétique relative <sup><a href="#source1">[1]</a></sup></p>
            </div>
        </section>

        <!-- Tableau récapitulatif -->
        <section style="margin-top: 50px;">
            <h2>Récapitulatif des 10 éco-rules Java</h2>
            <p>Cliquez sur une règle pour accéder directement aux détails et exemples de code.</p>

            <table class="summary-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Règle</th>
                        <th>Gain Performance</th>
                        <th>Gain Mémoire</th>
                        <th>Impact</th>
                    </tr>
                </thead>
                <tbody>
                    <tr onclick="location.href='#rule1'" style="cursor: pointer;">
                        <td>1</td>
                        <td><strong>StringBuilder</strong> - Concaténation en boucle</td>
                        <td>×10-100 plus rapide</td>
                        <td>-70-90%</td>
                        <td><span class="impact-badge impact-high">⭐⭐⭐⭐</span></td>
                    </tr>
                    <tr onclick="location.href='#rule2'" style="cursor: pointer;">
                        <td>2</td>
                        <td><strong>ArrayList sizing</strong> - Pré-dimensionner les listes</td>
                        <td>×2-3 plus rapide</td>
                        <td>-30-50%</td>
                        <td><span class="impact-badge impact-high">⭐⭐⭐</span></td>
                    </tr>
                    <tr onclick="location.href='#rule3'" style="cursor: pointer;">
                        <td>3</td>
                        <td><strong>Stream vs Loop</strong> - Choix approprié</td>
                        <td>Variable</td>
                        <td>Variable</td>
                        <td><span class="impact-badge impact-medium">⭐⭐</span></td>
                    </tr>
                    <tr onclick="location.href='#rule4'" style="cursor: pointer;">
                        <td>4</td>
                        <td><strong>HashSet lookup</strong> - Recherche efficace</td>
                        <td>×1000 plus rapide</td>
                        <td>Faible</td>
                        <td><span class="impact-badge impact-high">⭐⭐⭐⭐</span></td>
                    </tr>
                    <tr onclick="location.href='#rule5'" style="cursor: pointer;">
                        <td>5</td>
                        <td><strong>Primitive types</strong> - Éviter l'autoboxing</td>
                        <td>×3-5 plus rapide</td>
                        <td>-75%</td>
                        <td><span class="impact-badge impact-high">⭐⭐⭐</span></td>
                    </tr>
                    <tr onclick="location.href='#rule6'" style="cursor: pointer;">
                        <td>6</td>
                        <td><strong>Try-with-resources</strong> - Gestion des ressources</td>
                        <td>Évite les fuites</td>
                        <td>Significatif</td>
                        <td><span class="impact-badge impact-high">⭐⭐⭐⭐</span></td>
                    </tr>
                    <tr onclick="location.href='#rule7'" style="cursor: pointer;">
                        <td>7</td>
                        <td><strong>JVM tuning</strong> - Optimiser les paramètres JVM</td>
                        <td>×2-5 plus rapide</td>
                        <td>Optimisé</td>
                        <td><span class="impact-badge impact-high">⭐⭐⭐⭐⭐</span></td>
                    </tr>
                    <tr onclick="location.href='#rule8'" style="cursor: pointer;">
                        <td>8</td>
                        <td><strong>Lazy initialization</strong> - Initialisation différée</td>
                        <td>Variable</td>
                        <td>Significatif</td>
                        <td><span class="impact-badge impact-medium">⭐⭐</span></td>
                    </tr>
                    <tr onclick="location.href='#rule9'" style="cursor: pointer;">
                        <td>9</td>
                        <td><strong>Connection pooling</strong> - Réutiliser les connexions</td>
                        <td>×10-50 plus rapide</td>
                        <td>Élevé</td>
                        <td><span class="impact-badge impact-high">⭐⭐⭐⭐</span></td>
                    </tr>
                    <tr onclick="location.href='#rule10'" style="cursor: pointer;">
                        <td>10</td>
                        <td><strong>Logging optimisé</strong> - Logs conditionnels</td>
                        <td>10-30%</td>
                        <td>Faible</td>
                        <td><span class="impact-badge impact-low">⭐</span></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- LES 10 ÉCO-RULES -->
        <section style="margin-top: 60px;">
            <h2 style="text-align: center; font-size: 2rem; color: var(--primary-color); margin-bottom: 40px;">
                <i class="fas fa-leaf"></i> Les 10 Éco-Rules Java
            </h2>

            <!-- RÈGLE 1 : StringBuilder -->
            <div class="eco-rule" id="rule1">
                <h3>
                    <span class="rule-number">1</span>
                    StringBuilder - Concaténation de chaînes en boucle
                </h3>
                <p><span class="impact-badge impact-high"><i class="fas fa-leaf"></i> Impact TRÈS ÉLEVÉ</span></p>

                <h4 style="color: var(--emergency-color); margin-top: 20px;"><i class="fas fa-times-circle"></i> Code inefficace :</h4>
                <div class="code-block bad">
<pre><code><span class="keyword">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">""</span><span class="operator">;</span>
<span class="keyword">for</span> <span class="operator">(</span><span class="keyword">String</span> <span class="variable">item</span> <span class="operator">:</span> <span class="variable">items</span><span class="operator">)</span> <span class="operator">{</span>
    <span class="variable">result</span> <span class="operator">+=</span> <span class="variable">item</span> <span class="operator">+</span> <span class="string">", "</span><span class="operator">;</span>
<span class="operator">}</span></code></pre>
                </div>

                <div class="explanation-box">
                    <h4><i class="fas fa-info-circle"></i> Pourquoi c'est inefficace ?</h4>
                    <ul style="text-align: left;">
                        <li>Les <code>String</code> sont <strong>immuables</strong> en Java</li>
                        <li>Chaque <code>+=</code> crée un <strong>nouvel objet String</strong> en mémoire</li>
                    </ul>
                </div>

                <h4 style="color: var(--success-color); margin-top: 20px;"><i class="fas fa-check-circle"></i> Code optimisé :</h4>
                <div class="code-block good">
<pre><code><span class="keyword">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">StringBuilder</span><span class="operator">();</span>
<span class="keyword">for</span> <span class="operator">(</span><span class="keyword">String</span> <span class="variable">item</span> <span class="operator">:</span> <span class="variable">items</span><span class="operator">)</span> <span class="operator">{</span>
    <span class="variable">sb</span><span class="operator">.</span><span class="function">append</span><span class="operator">(</span><span class="variable">item</span><span class="operator">).</span><span class="function">append</span><span class="operator">(</span><span class="string">", "</span><span class="operator">);</span>
<span class="operator">}</span>
<span class="keyword">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="variable">sb</span><span class="operator">.</span><span class="function">toString</span><span class="operator">();</span>

<span class="comment">// Ou avec String.join() (Java 8+) :</span>
<span class="keyword">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="function">String</span><span class="operator">.</span><span class="function">join</span><span class="operator">(</span><span class="string">", "</span><span class="operator">,</span> <span class="variable">items</span><span class="operator">);</span></code></pre>
                </div>

                <div class="gain-box">
                    <h4><i class="fas fa-chart-line"></i> Gains mesurés :</h4>
                    <ul style="text-align: left;">
                        <li><strong>Plus rapide</strong> pour les grandes listes <sup><a href="#source3">[3]</a></sup></li>
                        <li>Réduit la <strong>consommation mémoire</strong></li>
                        <li>Moins de pression sur le Garbage Collector</li>
                    </ul>
                </div>
            </div>

            <!-- RÈGLE 2 : ArrayList sizing -->
            <div class="eco-rule" id="rule2">
                <h3>
                    <span class="rule-number">2</span>
                    ArrayList sizing - Pré-dimensionner les collections
                </h3>
                <p><span class="impact-badge impact-high"><i class="fas fa-leaf"></i> Impact ÉLEVÉ</span></p>

                <h4 style="color: var(--emergency-color); margin-top: 20px;"><i class="fas fa-times-circle"></i> Code inefficace :</h4>
                <div class="code-block bad">
<pre><code><span class="keyword">List</span><span class="operator">&lt;</span><span class="keyword">String</span><span class="operator">&gt;</span> <span class="variable">results</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">ArrayList</span><span class="operator">&lt;&gt;();</span>  <span class="comment">// Capacité par défaut : 10</span>
<span class="keyword">for</span> <span class="operator">(</span><span class="keyword">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="string">0</span><span class="operator">;</span> <span class="variable">i</span> <span class="operator">&lt;</span> <span class="string">10000</span><span class="operator">;</span> <span class="variable">i</span><span class="operator">++)</span> <span class="operator">{</span>
    <span class="variable">results</span><span class="operator">.</span><span class="function">add</span><span class="operator">(</span><span class="function">process</span><span class="operator">(</span><span class="variable">i</span><span class="operator">));</span>
<span class="operator">}</span></code></pre>
                </div>

                <div class="explanation-box">
                    <h4><i class="fas fa-info-circle"></i> Pourquoi c'est inefficace ?</h4>
                    <ul style="text-align: left;">
                        <li><code>ArrayList</code> Augmente sa capacité quand elle est pleine</li>
                        <li>Chaque redimensionnement = allocation + copie de tous les éléments</li>
                    </ul>
                </div>

                <h4 style="color: var(--success-color); margin-top: 20px;"><i class="fas fa-check-circle"></i> Code optimisé :</h4>
                <div class="code-block good">
<pre><code><span class="comment">// Pré-allouer avec la taille attendue :</span>
<span class="keyword">List</span><span class="operator">&lt;</span><span class="keyword">String</span><span class="operator">&gt;</span> <span class="variable">results</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">ArrayList</span><span class="operator">&lt;&gt;(</span><span class="string">10000</span><span class="operator">);</span>
<span class="keyword">for</span> <span class="operator">(</span><span class="keyword">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="string">0</span><span class="operator">;</span> <span class="variable">i</span> <span class="operator">&lt;</span> <span class="string">10000</span><span class="operator">;</span> <span class="variable">i</span><span class="operator">++)</span> <span class="operator">{</span>
    <span class="variable">results</span><span class="operator">.</span><span class="function">add</span><span class="operator">(</span><span class="function">process</span><span class="operator">(</span><span class="variable">i</span><span class="operator">));</span>
<span class="operator">}</span></code></pre>
                </div>

                <div class="gain-box">
                    <h4><i class="fas fa-chart-line"></i> Gains:</h4>
                    <ul style="text-align: left;">
                        <li>Élimine les copies de tableaux inutiles</li>
                        <li>Même principe pour <code>HashMap</code>, <code>HashSet</code>, etc. <sup><a href="#source4">[4]</a></sup></li>
                    </ul>
                </div>
            </div>

            <!-- RÈGLE 3 : Stream vs Loop -->
            <div class="eco-rule" id="rule3">
                <h3>
                    <span class="rule-number">3</span>
                    Stream vs Loop - Choisir la bonne approche
                </h3>
                <p><span class="impact-badge impact-medium"><i class="fas fa-bolt"></i> Impact MOYEN</span></p>

                <h4 style="color: var(--emergency-color); margin-top: 20px;"><i class="fas fa-times-circle"></i> Usage inapproprié des Streams :</h4>
                <div class="code-block bad">
<pre><code><span class="comment">// Stream pour une simple itération avec effets de bord</span>
<span class="variable">list</span><span class="operator">.</span><span class="function">stream</span><span class="operator">()</span>
    <span class="operator">.</span><span class="function">forEach</span><span class="operator">(</span><span class="variable">item</span> <span class="operator">-&gt;</span> <span class="function">process</span><span class="operator">(</span><span class="variable">item</span><span class="operator">));</span>

<span class="comment">// Ou pire, boxed() sur des primitifs</span>
<span class="keyword">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="function">IntStream</span><span class="operator">.</span><span class="function">range</span><span class="operator">(</span><span class="string">0</span><span class="operator">,</span> <span class="string">1000</span><span class="operator">)</span>
    <span class="operator">.</span><span class="function">boxed</span><span class="operator">()</span>
    <span class="operator">.</span><span class="function">reduce</span><span class="operator">(</span><span class="string">0</span><span class="operator">,</span> <span class="function">Integer</span><span class="operator">::</span><span class="function">sum</span><span class="operator">);</span></code></pre>
                </div>

                <div class="explanation-box">
                    <h4><i class="fas fa-info-circle"></i> Quand éviter les Streams ?</h4>
                    <ul style="text-align: left;">
                        <li>Streams créent des <strong>objets intermédiaires</strong> (lambdas, iterators)</li>
                        <li><code>boxed()</code> convertit les primitifs en objets (autoboxing)</li>
                        <li>Pour des opérations simples, une boucle for est plus efficace</li>
                    </ul>
                </div>

                <h4 style="color: var(--success-color); margin-top: 20px;"><i class="fas fa-check-circle"></i> Code optimisé :</h4>
                <div class="code-block good">
<pre><code><span class="comment">// Boucle classique pour les effets de bord :</span>
<span class="keyword">for</span> <span class="operator">(</span><span class="keyword">Item</span> <span class="variable">item</span> <span class="operator">:</span> <span class="variable">list</span><span class="operator">)</span> <span class="operator">{</span>
    <span class="function">process</span><span class="operator">(</span><span class="variable">item</span><span class="operator">);</span>
<span class="operator">}</span>

<span class="comment">// IntStream sans boxed() :</span>
<span class="keyword">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="function">IntStream</span><span class="operator">.</span><span class="function">range</span><span class="operator">(</span><span class="string">0</span><span class="operator">,</span> <span class="string">1000</span><span class="operator">).</span><span class="function">sum</span><span class="operator">();</span>

<span class="comment">// Streams pour transformations complexes (bonne utilisation) :</span>
<span class="keyword">List</span><span class="operator">&lt;</span><span class="keyword">String</span><span class="operator">&gt;</span> <span class="variable">names</span> <span class="operator">=</span> <span class="variable">users</span><span class="operator">.</span><span class="function">stream</span><span class="operator">()</span>
    <span class="operator">.</span><span class="function">filter</span><span class="operator">(</span><span class="variable">u</span> <span class="operator">-&gt;</span> <span class="variable">u</span><span class="operator">.</span><span class="function">isActive</span><span class="operator">())</span>
    <span class="operator">.</span><span class="function">map</span><span class="operator">(</span><span class="function">User</span><span class="operator">::</span><span class="function">getName</span><span class="operator">)</span>
    <span class="operator">.</span><span class="function">collect</span><span class="operator">(</span><span class="function">Collectors</span><span class="operator">.</span><span class="function">toList</span><span class="operator">());</span></code></pre>
                </div>

                <div class="gain-box">
                    <h4><i class="fas fa-chart-line"></i> Bonnes pratiques :</h4>
                    <ul style="text-align: left;">
                        <li><strong>Boucles for</strong> : effets de bord, itérations simples</li>
                        <li><strong>Streams</strong> : transformations, filtres, chaînes d'opérations </li>
                        <li><strong>Gains de performance : </strong> L'utilisation des boucles à la place de stream peut être 3x plus performant <sup><a href="#source5">[5]</a></sup></li>
                        <li>Préférer les streams primitifs (<code>IntStream</code>, <code>LongStream</code>)</li>
                    </ul>
                </div>
            </div>

            <!-- RÈGLE 4 : HashSet lookup -->
            <div class="eco-rule" id="rule4">
                <h3>
                    <span class="rule-number">4</span>
                    HashSet lookup - Recherche dans les collections
                </h3>
                <p><span class="impact-badge impact-high"><i class="fas fa-fire"></i> Impact TRÈS ÉLEVÉ</span></p>

                <h4 style="color: var(--emergency-color); margin-top: 20px;"><i class="fas fa-times-circle"></i> Code inefficace :</h4>
                <div class="code-block bad">
<pre><code><span class="keyword">List</span><span class="operator">&lt;</span><span class="keyword">String</span><span class="operator">&gt;</span> <span class="variable">allowedRoles</span> <span class="operator">=</span> <span class="function">Arrays</span><span class="operator">.</span><span class="function">asList</span><span class="operator">(</span><span class="string">"admin"</span><span class="operator">,</span> <span class="string">"editor"</span><span class="operator">,</span> <span class="string">"author"</span><span class="operator">);</span>

<span class="keyword">if</span> <span class="operator">(</span><span class="variable">allowedRoles</span><span class="operator">.</span><span class="function">contains</span><span class="operator">(</span><span class="variable">userRole</span><span class="operator">))</span> <span class="operator">{</span>
    <span class="comment">// Accès autorisé</span>
<span class="operator">}</span></code></pre>
                </div>

                <div class="explanation-box">
                    <h4><i class="fas fa-info-circle"></i> Pourquoi c'est inefficace ?</h4>
                    <ul style="text-align: left;">
                        <li><code>List.contains()</code> parcourt <strong>séquentiellement</strong> la liste (O(n))</li>
                        <li>Pour 10 000 éléments : <strong>pourrais être ×1000 plus lent</strong> qu'un <code>HashSet (O(1)) en moyenne</code></li>
                        <li>Temps CPU élevé pour des recherches fréquentes</li>
                    </ul>
                </div>

                <h4 style="color: var(--success-color); margin-top: 20px;"><i class="fas fa-check-circle"></i> Code optimisé :</h4>
                <div class="code-block good">
<pre><code><span class="comment">// Utiliser HashSet pour O(1) lookup :</span>
<span class="keyword">Set</span><span class="operator">&lt;</span><span class="keyword">String</span><span class="operator">&gt;</span> <span class="variable">allowedRoles</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">HashSet</span><span class="operator">&lt;&gt;(</span>
    <span class="function">Arrays</span><span class="operator">.</span><span class="function">asList</span><span class="operator">(</span><span class="string">"admin"</span><span class="operator">,</span> <span class="string">"editor"</span><span class="operator">,</span> <span class="string">"author"</span><span class="operator">)</span>
<span class="operator">);</span>

<span class="keyword">if</span> <span class="operator">(</span><span class="variable">allowedRoles</span><span class="operator">.</span><span class="function">contains</span><span class="operator">(</span><span class="variable">userRole</span><span class="operator">))</span> <span class="operator">{</span>
    <span class="comment">// Accès autorisé</span>
<span class="operator">}</span>

<span class="comment">// Ou avec Set.of() (Java 9+) :</span>
<span class="keyword">Set</span><span class="operator">&lt;</span><span class="keyword">String</span><span class="operator">&gt;</span> <span class="variable">allowedRoles</span> <span class="operator">=</span> <span class="function">Set</span><span class="operator">.</span><span class="function">of</span><span class="operator">(</span><span class="string">"admin"</span><span class="operator">,</span> <span class="string">"editor"</span><span class="operator">,</span> <span class="string">"author"</span><span class="operator">);</span></code></pre>
                </div>

                <div class="gain-box">
                    <h4><i class="fas fa-chart-line"></i> Gains mesurés :</h4>
                    <ul style="text-align: left;">
                        <li><strong>Performance</strong> : O(1) vs O(n) <sup><a href="#source6">[6]</a></sup></li>
                        <li><strong>Beaucoup plus rapide</strong> pour grandes collections</li>
                        <li>Économie CPU significative sur recherches fréquentes</li>
                    </ul>
                </div>
            </div>

            <!-- RÈGLE 5 : Primitive types -->
            <div class="eco-rule" id="rule5">
                <h3>
                    <span class="rule-number">5</span>
                    Primitive types - Éviter l'autoboxing inutile
                </h3>
                <p><span class="impact-badge impact-high"><i class="fas fa-leaf"></i> Impact ÉLEVÉ</span></p>

                <h4 style="color: var(--emergency-color); margin-top: 20px;"><i class="fas fa-times-circle"></i> Code inefficace :</h4>
                <div class="code-block bad">
<pre><code><span class="comment">// Utilisation de wrappers au lieu de primitifs</span>
<span class="keyword">Integer</span> <span class="variable">total</span> <span class="operator">=</span> <span class="string">0</span><span class="operator">;</span>
<span class="keyword">for</span> <span class="operator">(</span><span class="keyword">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="string">0</span><span class="operator">;</span> <span class="variable">i</span> <span class="operator">&lt;</span> <span class="string">1000000</span><span class="operator">;</span> <span class="variable">i</span><span class="operator">++)</span> <span class="operator">{</span>
    <span class="variable">total</span> <span class="operator">+=</span> <span class="variable">i</span><span class="operator">;</span>  <span class="comment">// Autoboxing à chaque itération !</span>
<span class="operator">}</span>

<span class="comment">// Ou avec List&lt;Integer&gt; au lieu de int[]</span>
<span class="keyword">List</span><span class="operator">&lt;</span><span class="keyword">Integer</span><span class="operator">&gt;</span> <span class="variable">numbers</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">ArrayList</span><span class="operator">&lt;&gt;();</span></code></pre>
                </div>

                <div class="explanation-box">
                    <h4><i class="fas fa-info-circle"></i> Pourquoi c'est inefficace ?</h4>
                    <ul style="text-align: left;">
                        <li><code>Integer</code> crée un <strong>objet sur le heap</strong> (16-24 octets vs 4 pour int)</li>
                        <li>Chaque <code>+=</code> avec Integer crée un <strong>nouvel objet</strong></li>
                        <li>1 million d'itérations = 1 million d'objets pour le GC</li>
                    </ul>
                </div>

                <h4 style="color: var(--success-color); margin-top: 20px;"><i class="fas fa-check-circle"></i> Code optimisé :</h4>
                <div class="code-block good">
<pre><code><span class="comment">// Utiliser les types primitifs :</span>
<span class="keyword">long</span> <span class="variable">total</span> <span class="operator">=</span> <span class="string">0</span><span class="operator">;</span>
<span class="keyword">for</span> <span class="operator">(</span><span class="keyword">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="string">0</span><span class="operator">;</span> <span class="variable">i</span> <span class="operator">&lt;</span> <span class="string">1000000</span><span class="operator">;</span> <span class="variable">i</span><span class="operator">++)</span> <span class="operator">{</span>
    <span class="variable">total</span> <span class="operator">+=</span> <span class="variable">i</span><span class="operator">;</span>  <span class="comment">// Pas d'allocation !</span>
<span class="operator">}</span>

<span class="comment">// Utiliser int[] au lieu de List&lt;Integer&gt; :</span>
<span class="keyword">int</span><span class="operator">[]</span> <span class="variable">numbers</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="keyword">int</span><span class="operator">[</span><span class="string">1000</span><span class="operator">];</span></code></pre>
                </div>

                <div class="gain-box">
                    <h4><i class="fas fa-chart-line"></i> Gains mesurés :</h4>
                    <ul style="text-align: left;">
                        <li><strong>Plus rapide</strong> sans autoboxing <sup><a href="#source7">[7]</a></sup></li>
                        <li>Mémoire réduite de <strong>75%</strong> (4 octets vs 16-24)</li>
                        <li>Moins de pression sur le Garbage Collector</li>
                    </ul>
                </div>
            </div>

            <!-- RÈGLE 6 : Try-with-resources -->
            <div class="eco-rule" id="rule6">
                <h3>
                    <span class="rule-number">6</span>
                    Try-with-resources - Gestion des ressources
                </h3>
                <p><span class="impact-badge impact-medium"><i class="fas fa-fire"></i> Impact MOYEN</span></p>

                <h4 style="color: var(--emergency-color); margin-top: 20px;"><i class="fas fa-times-circle"></i> Code dangereux :</h4>
                <div class="code-block bad">
<pre><code><span class="keyword">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">null</span><span class="operator">;</span>
<span class="keyword">try</span> <span class="operator">{</span>
    <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">FileInputStream</span><span class="operator">(</span><span class="string">"file.txt"</span><span class="operator">);</span>
    <span class="comment">// Lecture...</span>
<span class="operator">}</span> <span class="keyword">catch</span> <span class="operator">(</span><span class="keyword">IOException</span> <span class="variable">e</span><span class="operator">)</span> <span class="operator">{</span>
    <span class="variable">e</span><span class="operator">.</span><span class="function">printStackTrace</span><span class="operator">();</span>
<span class="operator">}</span> <span class="keyword">finally</span> <span class="operator">{</span>
    <span class="keyword">if</span> <span class="operator">(</span><span class="variable">fis</span> <span class="operator">!=</span> <span class="keyword">null</span><span class="operator">)</span> <span class="operator">{</span>
        <span class="keyword">try</span> <span class="operator">{</span> <span class="variable">fis</span><span class="operator">.</span><span class="function">close</span><span class="operator">();</span> <span class="operator">}</span> <span class="keyword">catch</span> <span class="operator">(</span><span class="keyword">IOException</span> <span class="variable">e</span><span class="operator">)</span> <span class="operator">{}</span>
    <span class="operator">}</span>
<span class="operator">}</span></code></pre>
                </div>

                <div class="explanation-box">
                    <h4><i class="fas fa-info-circle"></i> Pourquoi c'est dangereux ?</h4>
                    <ul style="text-align: left;">
                        <li>Code verbeux et sujet aux <strong>fuites de ressources</strong></li>
                        <li>Si exception dans finally, la ressource reste ouverte</li>
                        <li>File descriptors, connexions DB non libérés = <strong>fuite mémoire</strong></li>
                    </ul>
                </div>

                <h4 style="color: var(--success-color); margin-top: 20px;"><i class="fas fa-check-circle"></i> Code optimisé :</h4>
                <div class="code-block good">
<pre><code><span class="comment">// Try-with-resources (Java 7+) :</span>
<span class="keyword">try</span> <span class="operator">(</span><span class="keyword">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">FileInputStream</span><span class="operator">(</span><span class="string">"file.txt"</span><span class="operator">))</span> <span class="operator">{</span>
    <span class="comment">// Lecture...</span>
<span class="operator">}</span> <span class="keyword">catch</span> <span class="operator">(</span><span class="keyword">IOException</span> <span class="variable">e</span><span class="operator">)</span> <span class="operator">{</span>
    <span class="variable">e</span><span class="operator">.</span><span class="function">printStackTrace</span><span class="operator">();</span>
<span class="operator">}</span>
<span class="comment">// Fermeture automatique garantie !</span>

<span class="comment">// Plusieurs ressources :</span>
<span class="keyword">try</span> <span class="operator">(</span><span class="keyword">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="function">getConnection</span><span class="operator">();</span>
     <span class="keyword">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="variable">conn</span><span class="operator">.</span><span class="function">prepareStatement</span><span class="operator">(</span><span class="variable">sql</span><span class="operator">);</span>
     <span class="keyword">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="variable">ps</span><span class="operator">.</span><span class="function">executeQuery</span><span class="operator">())</span> <span class="operator">{</span>
    <span class="comment">// Traitement...</span>
<span class="operator">}</span></code></pre>
                </div>

                <div class="gain-box">
                    <h4><i class="fas fa-chart-line"></i> Gains mesurés :</h4>
                    <ul style="text-align: left;">
                        <li><strong>Élimine les fuites de ressources</strong></li>
                        <li>Code plus court et lisible</li>
                        <li>Libération garantie même en cas d'exception <sup><a href="#source8">[8]</a></sup></li>
                    </ul>
                </div>
            </div>

            <!-- RÈGLE 7 : JVM tuning -->
            <div class="eco-rule" id="rule7">
                <h3>
                    <span class="rule-number">7</span>
                    JVM tuning - Optimiser les paramètres JVM
                </h3>
                <p><span class="impact-badge impact-high"><i class="fas fa-fire"></i> Impact CRITIQUE</span></p>

                <h4 style="color: var(--emergency-color); margin-top: 20px;"><i class="fas fa-times-circle"></i> Configuration par défaut :</h4>
                <div class="code-block bad">
<pre><code><span class="comment"># Lancement sans optimisation</span>
<span class="keyword">java</span> <span class="operator">-jar</span> <span class="string">application.jar</span></code></pre>
                </div>

                <div class="explanation-box">
                    <h4><i class="fas fa-info-circle"></i> Pourquoi c'est inefficace ?</h4>
                    <ul style="text-align: left;">
                        <li>Heap par défaut souvent <strong>sous-dimensionné ou surdimensionné</strong></li>
                        <li>GC par défaut pas toujours optimal pour le use case</li>
                        <li>JIT compilation non optimisée pour la charge réelle</li>
                    </ul>
                </div>

                <h4 style="color: var(--success-color); margin-top: 20px;"><i class="fas fa-check-circle"></i> Configuration optimisée :</h4>
                <div class="code-block good">
<pre><code><span class="comment"># Configuration production optimisée</span>
<span class="keyword">java</span> <span class="operator">-Xms512m</span> <span class="operator">-Xmx512m</span> \           <span class="comment"># Heap fixe (pas de redim)</span>
     <span class="operator">-XX:+UseG1GC</span> \                  <span class="comment"># G1 GC pour faible latence</span>
     <span class="operator">-XX:MaxGCPauseMillis=100</span> \      <span class="comment"># Limite pause GC</span>
     <span class="operator">-XX:+UseStringDeduplication</span> \   <span class="comment"># Déduplique les Strings</span>
     <span class="operator">-jar</span> <span class="string">application.jar</span>

<span class="comment"># Pour applications cloud/containers :</span>
<span class="keyword">java</span> <span class="operator">-XX:+UseContainerSupport</span> \     <span class="comment"># Détecte les limites container</span>
     <span class="operator">-XX:MaxRAMPercentage=75.0</span> \     <span class="comment"># Utilise 75% de la RAM dispo</span>
     <span class="operator">-jar</span> <span class="string">application.jar</span></code></pre>
                </div>

                <div class="gain-box">
                    <h4><i class="fas fa-chart-line"></i> Gains mesurés :</h4>
                    <ul style="text-align: left;">
                        <li><strong>Performance</strong> : Selon la configuration <sup><a href="#source9">[9]</a></sup></li>
                        <li>Moins de cycles CPU gaspillés = moins de consommation électrique</li>
                    </ul>
                </div>
            </div>

            <!-- RÈGLE 8 : Lazy initialization -->
            <div class="eco-rule" id="rule8">
                <h3>
                    <span class="rule-number">8</span>
                    Lazy initialization - Initialisation différée
                </h3>
                <p><span class="impact-badge impact-medium"><i class="fas fa-bolt"></i> Impact MOYEN</span></p>

                <h4 style="color: var(--emergency-color); margin-top: 20px;"><i class="fas fa-times-circle"></i> Code inefficace :</h4>
                <div class="code-block bad">
<pre><code><span class="keyword">public class</span> <span class="function">UserService</span> <span class="operator">{</span>
    <span class="comment">// Chargé immédiatement même si jamais utilisé</span>
    <span class="keyword">private final</span> <span class="keyword">ExpensiveResource</span> <span class="variable">resource</span> <span class="operator">=</span> 
        <span class="keyword">new</span> <span class="function">ExpensiveResource</span><span class="operator">();</span>
    
    <span class="keyword">private final</span> <span class="keyword">List</span><span class="operator">&lt;</span><span class="keyword">Config</span><span class="operator">&gt;</span> <span class="variable">configs</span> <span class="operator">=</span> 
        <span class="function">loadAllConfigs</span><span class="operator">();</span>  <span class="comment">// Coûteux au démarrage</span>
<span class="operator">}</span></code></pre>
                </div>

                <div class="explanation-box">
                    <h4><i class="fas fa-info-circle"></i> Pourquoi c'est inefficace ?</h4>
                    <ul style="text-align: left;">
                        <li>Ressources allouées <strong>même si jamais utilisées</strong></li>
                        <li>Temps de démarrage application augmenté</li>
                        <li>Mémoire consommée inutilement</li>
                    </ul>
                </div>

                <h4 style="color: var(--success-color); margin-top: 20px;"><i class="fas fa-check-circle"></i> Code optimisé :</h4>
                <div class="code-block good">
<pre><code><span class="keyword">public class</span> <span class="function">UserService</span> <span class="operator">{</span>
    <span class="keyword">private</span> <span class="keyword">ExpensiveResource</span> <span class="variable">resource</span><span class="operator">;</span>  <span class="comment">// null au départ</span>
    
    <span class="keyword">public</span> <span class="keyword">ExpensiveResource</span> <span class="function">getResource</span><span class="operator">()</span> <span class="operator">{</span>
        <span class="keyword">if</span> <span class="operator">(</span><span class="variable">resource</span> <span class="operator">==</span> <span class="keyword">null</span><span class="operator">)</span> <span class="operator">{</span>
            <span class="variable">resource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">ExpensiveResource</span><span class="operator">();</span>
        <span class="operator">}</span>
        <span class="keyword">return</span> <span class="variable">resource</span><span class="operator">;</span>
    <span class="operator">}</span>
<span class="operator">}</span>

<span class="comment">// Ou avec Supplier (Java 8+) :</span>
<span class="keyword">private final</span> <span class="keyword">Supplier</span><span class="operator">&lt;</span><span class="keyword">ExpensiveResource</span><span class="operator">&gt;</span> <span class="variable">resourceSupplier</span> <span class="operator">=</span>
    <span class="function">Suppliers</span><span class="operator">.</span><span class="function">memoize</span><span class="operator">(</span><span class="function">ExpensiveResource</span><span class="operator">::</span><span class="keyword">new</span><span class="operator">);</span></code></pre>
                </div>

                <div class="gain-box">
                    <h4><i class="fas fa-chart-line"></i> Gains mesurés :</h4>
                    <ul style="text-align: left;">
                        <li>Temps de démarrage réduit significativement</li>
                        <li>Mémoire allouée seulement si nécessaire</li>
                        <li>Meilleure réactivité de l'application <sup><a href="#source10">[10]</a></sup></li>
                    </ul>
                </div>
            </div>

            <!-- RÈGLE 9 : Connection pooling -->
            <div class="eco-rule" id="rule9">
                <h3>
                    <span class="rule-number">9</span>
                    Connection pooling - Réutiliser les connexions
                </h3>
                <p><span class="impact-badge impact-high"><i class="fas fa-fire"></i> Impact TRÈS ÉLEVÉ</span></p>

                <h4 style="color: var(--emergency-color); margin-top: 20px;"><i class="fas fa-times-circle"></i> Code inefficace :</h4>
                <div class="code-block bad">
<pre><code><span class="comment">// Nouvelle connexion à chaque requête</span>
<span class="keyword">public</span> <span class="keyword">User</span> <span class="function">findUser</span><span class="operator">(</span><span class="keyword">int</span> <span class="variable">id</span><span class="operator">)</span> <span class="operator">{</span>
    <span class="keyword">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="function">DriverManager</span><span class="operator">.</span><span class="function">getConnection</span><span class="operator">(</span><span class="variable">url</span><span class="operator">,</span> <span class="variable">user</span><span class="operator">,</span> <span class="variable">pass</span><span class="operator">);</span>
    <span class="comment">// Exécuter la requête...</span>
    <span class="variable">conn</span><span class="operator">.</span><span class="function">close</span><span class="operator">();</span>  <span class="comment">// Connexion détruite</span>
    <span class="keyword">return</span> <span class="variable">user</span><span class="operator">;</span>
<span class="operator">}</span></code></pre>
                </div>

                <div class="explanation-box">
                    <h4><i class="fas fa-info-circle"></i> Pourquoi c'est inefficace ?</h4>
                    <ul style="text-align: left;">
                        <li>Créer une connexion DB = <strong>50-200ms</strong> (handshake TCP, auth...)</li>
                        <li>Pour 1000 requêtes/sec : <strong>1000 connexions créées/détruites</strong></li>
                        <li>Surcharge réseau, CPU et mémoire considérable</li>
                    </ul>
                </div>

                <h4 style="color: var(--success-color); margin-top: 20px;"><i class="fas fa-check-circle"></i> Code optimisé :</h4>
                <div class="code-block good">
<pre><code><span class="comment">// Configuration HikariCP (pool de connexions)</span>
<span class="keyword">HikariConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">HikariConfig</span><span class="operator">();</span>
<span class="variable">config</span><span class="operator">.</span><span class="function">setJdbcUrl</span><span class="operator">(</span><span class="variable">url</span><span class="operator">);</span>
<span class="variable">config</span><span class="operator">.</span><span class="function">setUsername</span><span class="operator">(</span><span class="variable">user</span><span class="operator">);</span>
<span class="variable">config</span><span class="operator">.</span><span class="function">setPassword</span><span class="operator">(</span><span class="variable">pass</span><span class="operator">);</span>
<span class="variable">config</span><span class="operator">.</span><span class="function">setMaximumPoolSize</span><span class="operator">(</span><span class="string">10</span><span class="operator">);</span>  <span class="comment">// Réutilise 10 connexions</span>

<span class="keyword">HikariDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">HikariDataSource</span><span class="operator">(</span><span class="variable">config</span><span class="operator">);</span>

<span class="keyword">public</span> <span class="keyword">User</span> <span class="function">findUser</span><span class="operator">(</span><span class="keyword">int</span> <span class="variable">id</span><span class="operator">)</span> <span class="operator">{</span>
    <span class="keyword">try</span> <span class="operator">(</span><span class="keyword">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="variable">ds</span><span class="operator">.</span><span class="function">getConnection</span><span class="operator">())</span> <span class="operator">{</span>  <span class="comment">// &lt;1ms</span>
        <span class="comment">// Exécuter la requête...</span>
    <span class="operator">}</span>  <span class="comment">// Connexion retournée au pool</span>
<span class="operator">}</span></code></pre>
                </div>

                <div class="gain-box">
                    <h4><i class="fas fa-chart-line"></i> Gains mesurés :</h4>
                    <ul style="text-align: left;">
                        <li><strong>×10-50 plus rapide</strong> pour obtenir une connexion <sup><a href="#source11">[11]</a></sup></li>
                        <li>Réduit la charge serveur DB de <strong>80-95%</strong></li>
                        <li>Moins de ressources réseau consommées</li>
                    </ul>
                </div>
            </div>

            <!-- RÈGLE 10 : Logging optimisé -->
            <div class="eco-rule" id="rule10">
                <h3>
                    <span class="rule-number">10</span>
                    Logging optimisé - Logs conditionnels
                </h3>
                <p><span class="impact-badge impact-low"><i class="fas fa-info"></i> Impact FAIBLE</span></p>

                <h4 style="color: var(--emergency-color); margin-top: 20px;"><i class="fas fa-times-circle"></i> Code inefficace :</h4>
                <div class="code-block bad">
<pre><code><span class="comment">// Concaténation toujours exécutée même si debug désactivé</span>
<span class="variable">logger</span><span class="operator">.</span><span class="function">debug</span><span class="operator">(</span><span class="string">"User "</span> <span class="operator">+</span> <span class="variable">user</span><span class="operator">.</span><span class="function">getName</span><span class="operator">()</span> <span class="operator">+</span> 
             <span class="string">" performed action "</span> <span class="operator">+</span> <span class="variable">action</span><span class="operator">.</span><span class="function">toString</span><span class="operator">());</span>

<span class="comment">// Appel coûteux pour rien</span>
<span class="variable">logger</span><span class="operator">.</span><span class="function">debug</span><span class="operator">(</span><span class="string">"Data: "</span> <span class="operator">+</span> <span class="function">expensiveToString</span><span class="operator">(</span><span class="variable">largeObject</span><span class="operator">));</span></code></pre>
                </div>

                <div class="explanation-box">
                    <h4><i class="fas fa-info-circle"></i> Pourquoi c'est inefficace ?</h4>
                    <ul style="text-align: left;">
                        <li>La concaténation est <strong>toujours exécutée</strong> avant l'appel</li>
                        <li>Les méthodes <code>toString()</code> sont appelées inutilement</li>
                        <li>En production (level INFO), le debug est ignoré mais le calcul est fait</li>
                    </ul>
                </div>

                <h4 style="color: var(--success-color); margin-top: 20px;"><i class="fas fa-check-circle"></i> Code optimisé :</h4>
                <div class="code-block good">
<pre><code><span class="comment">// Utiliser les placeholders (SLF4J) :</span>
<span class="variable">logger</span><span class="operator">.</span><span class="function">debug</span><span class="operator">(</span><span class="string">"User {} performed action {}"</span><span class="operator">,</span> 
             <span class="variable">user</span><span class="operator">.</span><span class="function">getName</span><span class="operator">(),</span> <span class="variable">action</span><span class="operator">);</span>

<span class="comment">// Pour les appels coûteux, vérifier d'abord :</span>
<span class="keyword">if</span> <span class="operator">(</span><span class="variable">logger</span><span class="operator">.</span><span class="function">isDebugEnabled</span><span class="operator">())</span> <span class="operator">{</span>
    <span class="variable">logger</span><span class="operator">.</span><span class="function">debug</span><span class="operator">(</span><span class="string">"Data: {}"</span><span class="operator">,</span> <span class="function">expensiveToString</span><span class="operator">(</span><span class="variable">largeObject</span><span class="operator">));</span>
<span class="operator">}</span>

<span class="comment">// Ou avec lambda (Log4j2, SLF4J 2.0+) :</span>
<span class="variable">logger</span><span class="operator">.</span><span class="function">debug</span><span class="operator">(</span><span class="string">"Data: {}"</span><span class="operator">,</span> <span class="operator">()</span> <span class="operator">-&gt;</span> <span class="function">expensiveToString</span><span class="operator">(</span><span class="variable">largeObject</span><span class="operator">));</span></code></pre>
                </div>

                <div class="gain-box">
                    <h4><i class="fas fa-chart-line"></i> Gains mesurés :</h4>
                    <ul style="text-align: left;">
                        <li>Évite les allocations String inutiles</li>
                        <li><strong>10-30%</strong> de réduction CPU dans code avec beaucoup de logs <sup><a href="#source12">[12]</a></sup></li>
                        <li>Lambdas évaluées seulement si niveau actif</li>
                    </ul>
                </div>
            </div>

        </section>

        <!-- Bonnes pratiques complémentaires -->
        <section style="margin-top: 60px; padding: 30px; background: linear-gradient(135deg, rgba(47, 223, 173, 0.1) 0%, rgba(47, 223, 173, 0.02) 100%); border-radius: 10px;">
            <h2 style="color: var(--primary-color); margin-bottom: 30px;">
                <i class="fas fa-leaf"></i> Bonnes pratiques complémentaires
            </h2>

            <div class="container">
                <div class="column">
                    <h3><i class="fas fa-check-circle"></i> Records (Java 16+)</h3>
                    <div class="code-block" style="font-size: 0.85rem;">
<pre><code><span class="comment">// Remplace les POJO verbeux</span>
<span class="keyword">public record</span> <span class="function">User</span><span class="operator">(</span>
    <span class="keyword">String</span> <span class="variable">name</span><span class="operator">,</span>
    <span class="keyword">int</span> <span class="variable">age</span><span class="operator">,</span>
    <span class="keyword">String</span> <span class="variable">email</span>
<span class="operator">) {}</span></code></pre>
                    </div>
                    <p style="font-size: 0.9rem; color: var(--text-color-light);">
                        Moins de code = moins de bytecode = moins de mémoire
                    </p>
                </div>

                <div class="column">
                    <h3><i class="fas fa-database"></i> Batch processing</h3>
                    <div class="code-block good" style="font-size: 0.85rem;">
<pre><code><span class="comment">// ✅ Batch insert au lieu de 1000 inserts</span>
<span class="keyword">try</span> <span class="operator">(</span><span class="keyword">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="variable">conn</span><span class="operator">.</span><span class="function">prepareStatement</span><span class="operator">(</span><span class="variable">sql</span><span class="operator">))</span> <span class="operator">{</span>
    <span class="keyword">for</span> <span class="operator">(</span><span class="keyword">User</span> <span class="variable">u</span> <span class="operator">:</span> <span class="variable">users</span><span class="operator">)</span> <span class="operator">{</span>
        <span class="variable">ps</span><span class="operator">.</span><span class="function">setString</span><span class="operator">(</span><span class="string">1</span><span class="operator">,</span> <span class="variable">u</span><span class="operator">.</span><span class="function">name</span><span class="operator">());</span>
        <span class="variable">ps</span><span class="operator">.</span><span class="function">addBatch</span><span class="operator">();</span>
    <span class="operator">}</span>
    <span class="variable">ps</span><span class="operator">.</span><span class="function">executeBatch</span><span class="operator">();</span>
<span class="operator">}</span></code></pre>
                    </div>
                    <p style="font-size: 0.9rem; color: var(--text-color-light);">
                        Réduit les allers-retours réseau de 99%
                    </p>
                </div>

                <div class="column">
                    <h3><i class="fas fa-memory"></i> Virtual Threads (Java 21+)</h3>
                    <div class="code-block good" style="font-size: 0.85rem;">
<pre><code><span class="comment">// Threads légers pour I/O</span>
<span class="keyword">try</span> <span class="operator">(</span><span class="keyword">var</span> <span class="variable">executor</span> <span class="operator">=</span> 
    <span class="function">Executors</span><span class="operator">.</span><span class="function">newVirtualThreadPerTaskExecutor</span><span class="operator">())</span> <span class="operator">{</span>
    <span class="variable">tasks</span><span class="operator">.</span><span class="function">forEach</span><span class="operator">(</span><span class="variable">task</span> <span class="operator">-&gt;</span> 
        <span class="variable">executor</span><span class="operator">.</span><span class="function">submit</span><span class="operator">(</span><span class="variable">task</span><span class="operator">));</span>
<span class="operator">}</span></code></pre>
                    </div>
                    <p style="font-size: 0.9rem; color: var(--text-color-light);">
                        Millions de threads avec faible empreinte mémoire
                    </p>
                </div>
            </div>
        </section>

        <!-- Outils recommandés -->
        <section style="margin-top: 50px;">
            <h2><i class="fas fa-tools"></i> Outils pour mesurer et améliorer</h2>
            <div class="services-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 30px;">

                <div class="service-card">
                    <i class="fas fa-code" style="font-size: 2.5rem; color: var(--primary-color);"></i>
                    <h3>ecoCode Java</h3>
                    <p>Plugin SonarQube dédié à l'analyse statique Java pour identifier les structures de code ayant un impact écologique négatif.</p>
                    <a href="https://github.com/green-code-initiative/ecoCode" target="_blank" class="button" style="margin-top: 15px; font-size: 0.9rem;">
                        <i class="fab fa-github"></i> GitHub
                    </a>
                </div>

                <div class="service-card">
                    <i class="fas fa-chart-bar" style="font-size: 2.5rem; color: var(--info-color);"></i>
                    <h3>JProfiler / VisualVM</h3>
                    <p>Profileurs Java pour mesurer la consommation mémoire, le temps CPU et identifier les goulots d'étranglement.</p>
                    <a href="https://visualvm.github.io/" target="_blank" class="button" style="margin-top: 15px; font-size: 0.9rem; background-color: var(--info-color);">
                        <i class="fas fa-external-link-alt"></i> VisualVM
                    </a>
                </div>

                <div class="service-card">
                    <i class="fas fa-tachometer-alt" style="font-size: 2.5rem; color: var(--warning-color);"></i>
                    <h3>JMH (Java Microbenchmark)</h3>
                    <p>Framework de benchmark officiel pour mesurer précisément les performances du code Java et comparer les optimisations.</p>
                    <a href="https://github.com/openjdk/jmh" target="_blank" class="button" style="margin-top: 15px; font-size: 0.9rem; background-color: var(--warning-color);">
                        <i class="fab fa-github"></i> GitHub
                    </a>
                </div>

            </div>
        </section>

        <!-- Sources -->
        <section class="bibliography" style="margin-top: 60px;">
            <h2>Sources & Références</h2>
            <ul class="bibliography-list" style="text-align: left; max-width: 900px; margin: 0 auto;">
                <li id="source1">
                    <strong>[1]</strong> Pereira, R., Couto, M., Ribeiro, F., Rua, R., Cunha, J., Fernandes, J. P., & Saraiva, J. (2017).
                    <em>Energy efficiency across programming languages.</em>
                    <a href="https://repositorium.uminho.pt/bitstream/1822/69044/1/paper.pdf" target="_blank">[PDF]</a>
                </li>
                <li id="source2">
                    <strong>[2]</strong> TIOBE. <em>TIOBE Programming Community index.</em>
                    <a href="https://www.tiobe.com/tiobe-index/" target="_blank">[Lien]</a>
                </li>
                <li id="source3">
                    <strong>[3]</strong> Baeldung. <em>Performance of String Concatenation in Java.</em>
                    <a href="https://www.baeldung.com/java-string-concatenation" target="_blank">[Lien]</a>
                </li>
                <li id="source4">
                    <strong>[4]</strong> Oracle. <em>ArrayList Initial Capacity - Java Documentation.</em>
                    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" target="_blank">[Lien]</a>
                </li>
                <li id="source5">
                    <strong>[5]</strong> Baeldung. <em>Java 8 Streams vs Loops Performance.</em>
                    <a href="https://www.baeldung.com/java-streams-vs-loops" target="_blank">[Lien]</a>
                </li>
                <li id="source6">
                    <strong>[6]</strong> Oracle. <em>HashSet vs ArrayList Performance - Collections Framework.</em>
                    <a href="https://docs.oracle.com/javase/tutorial/collections/implementations/set.html" target="_blank">[Lien]</a>
                </li>
                <li id="source7">
                    <strong>[7]</strong><em>Performance impact of autoboxing</em>
                    <a href="https://stackoverflow.com/questions/3430671/performance-impact-of-autoboxing" target="_blank">[Lien]</a>
                </li>
                <li id="source8">
                    <strong>[8]</strong> Oracle. <em>The try-with-resources Statement.</em>
                    <a href="https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html" target="_blank">[Lien]</a>
                </li>
                <li id="source9">
                    <strong>[9]</strong> Oracle. <em>Java HotSpot VM Options - JVM Tuning Guide.</em>
                    <a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html" target="_blank">[Lien]</a>
                </li>
                <li id="source10">
                    <strong>[10]</strong><em>What is lazy initialization and why is it useful?</em>
                    <a href="https://stackoverflow.com/questions/978759/what-is-lazy-initialization-and-why-is-it-useful" target="_blank">[Lien]</a>
                </li>
                <li id="source11">
                    <strong>[11]</strong> HikariCP. <em>Fast, simple, reliable - HikariCP connection pool.</em>
                    <a href="https://github.com/brettwooldridge/HikariCP" target="_blank">[GitHub]</a>
                </li>
                <li id="source12">
                    <strong>[12]</strong> SLF4J. <em>SLF4J Parameterized Messages - Performance.</em>
                    <a href="https://www.slf4j.org/faq.html#logging_performance" target="_blank">[Lien]</a>
                </li>
                <li id="source13">
                    <strong>[13]</strong> Green Code Initiative. <em>ecoCode - Reduce the environmental footprint of your Java software programs.</em>
                    <a href="https://github.com/green-code-initiative/ecoCode" target="_blank">[GitHub]</a>
                </li>
            </ul>
        </section>

        <!-- Navigation -->
        <div class="button-container" style="margin-top: 60px; gap: 15px; display: flex; flex-wrap: wrap; justify-content: center;">
            <a href="../langages.html" class="button">
                <i class="fas fa-arrow-left"></i> Retour aux langages
            </a>
            <a href="../../index.html" class="button" style="background-color: var(--info-color);">
                <i class="fas fa-home"></i> Accueil
            </a>
            <a href="../en-pratique.html" class="button" style="background-color: var(--success-color);">
                <i class="fas fa-code"></i> Ateliers pratiques
            </a>
        </div>

    </div>

    <footer>
        <p class="mg-0">&copy; 2025 - COURDIER Rémy, ROCHAT Lise, ONIAN Youssouf & all - <a href="../a-propos.html">A propos</a></p>
    </footer>

    <script>
        // Smooth scroll pour les ancres
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>
</body>

</html>
